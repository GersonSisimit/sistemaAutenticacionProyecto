@model List<Frontend.Models.Vehicle>

@{
    ViewData["Title"] = "Catálogo de Vehículos";
}

<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="fw-bold text-success mb-0">
            <i class="bi bi-car-front-fill"></i> @ViewData["Title"]
        </h3>
        <div class="input-group w-50">
            <span class="input-group-text bg-success text-white">
                <i class="bi bi-search"></i>
            </span>
            <input id="searchInput" type="text" class="form-control" placeholder="Buscar por marca o modelo...">
        </div>
    </div>

    <div class="card shadow-lg border-0 rounded-4">
        <div class="card-body p-4">
            <table class="table table-hover align-middle" id="vehiclesTable">
                <thead class="table-success text-center">
                    <tr>
                        <th>ID</th>
                        <th>Marca</th>
                        <th>Modelo</th>
                        <th>Año</th>
                        <th>Precio (Q)</th>
                    </tr>
                </thead>
                <tbody class="text-center">
                    @if (Model != null && Model.Any())
                    {
                        foreach (var v in Model)
                        {
                            <tr>
                                <td>@v.Id</td>
                                <td>@v.Brand</td>
                                <td>@v.Model</td>
                                <td>@v.Year</td>
                                <td>@v.Price.ToString("N2")</td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="5" class="text-muted py-4">
                                <i class="bi bi-info-circle"></i> No hay vehículos disponibles en el catálogo.
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Filtro de búsqueda en tiempo real
        document.getElementById("searchInput").addEventListener("keyup", function () {
            const filter = this.value.toLowerCase();
            const rows = document.querySelectorAll("#vehiclesTable tbody tr");
            rows.forEach(row => {
                const brand = row.cells[1]?.textContent.toLowerCase();
                const model = row.cells[2]?.textContent.toLowerCase();
                if (brand.includes(filter) || model.includes(filter)) {
                    row.style.display = "";
                } else {
                    row.style.display = "none";
                }
            });
        });
    </script>
}

